<!DOCTYPE html>
<html lang="pl" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="layout/default"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="#{messages.user.account.title}">Account settings</title>
</head>
<body>
<div class="row" layout:fragment="content">
    <div class="col s12">
        <h2 class="black-text center"><b th:text="#{messages.user.account.mainHeader}">Account settings</b></h2>
    </div>

    <div class="col s4 offset-s4 blue lighten-4">
        <p th:text="#{messages.user.account.label.accountInfo}">
            Here you can change an owner of the account. After confirming the changes, our consultant will contact you at the indicated phone number.
            The changes made will be approved manually by the consultant after confirmation by the new owner.
        </p>
        <form class="blue lighten-4" autocomplete="off" action="#" th:action="@{'/user_account/'+${user.id}}"
              th:object="${user}" method="post" role="form" data-toggle="validator">

            <!--firstName-->
            <div class="input-field col s6">
                <label for="firstName" th:text="#{messages.common.label.name}">Name</label>
                <input id="firstName" type="text" th:field="*{firstName}" th:value="${user.firstName}"
                       class="validate"/>
                <div th:if="${#fields.hasErrors('firstName')}" th:errors="*{firstName}"
                     class="validation-message alert alert-danger" role="alert"></div>
            </div>
            <!--lastName-->
            <div class="input-field col s6">
                <label for="lastName" th:text="#{messages.common.label.surname}">Surname</label>
                <input id="lastName" type="text" th:field="*{lastName}" th:value="${user.lastName}" class="validate"/>
                <div th:if="${#fields.hasErrors('lastName')}" th:errors="*{lastName}"
                     class="validation-message alert alert-danger" role="alert"></div>
            </div>
            <!--pesel-->
            <div class="input-field col s6">
                <label for="pesel" th:text="#{messages.common.label.pesel}">PESEL</label>
                <input id="pesel" type="number" th:field="*{pesel}" th:value="${user.pesel}" class="validate"/>
                <div th:if="${#fields.hasErrors('pesel')}" th:errors="*{pesel}"
                     class="validation-message alert alert-danger" role="alert"></div>
            </div>
            <!--address.phoneNumber-->
            <div class="input-field col s6">
                <label for="address.phoneNumber" th:text="#{messages.common.label.phoneNumber}">Phone number</label>
                <input id="address.phoneNumber" type="tel" th:field="*{address.phoneNumber}"
                       th:value="${user.address.phoneNumber}" class="validate"/>
                <div th:if="${#fields.hasErrors('address.phoneNumber')}" th:errors="*{address.phoneNumber}"
                     class="validation-message alert alert-danger" role="alert"></div>
            </div>
            <!--email-->
            <div class="input-field col s12">
                <label for="email" th:text="#{messages.common.label.email}">E-mail</label>
                <input id="email" type="email" th:field="*{email}" th:value="${email}" class="validate"/>
                <div th:if="${#fields.hasErrors('email')}" th:errors="*{email}"
                     class="validation-message alert alert-danger" role="alert"></div>
            </div>
            <div class="col s12 center">
                <button class="btn waves-effect waves-light" type="submit" name="action" th:text="#{messages.user.account.button.changeData}">Change data
                    <i class="material-icons right">send</i>
                </button>
            </div>
        </form>
        <form class="blue lighten-4" autocomplete="off" action="#"
              th:action="@{'/user_account/'+${user.id}+'?passChange=true'}"
              th:object="${user}" method="post" role="form" data-toggle="validator">
            <div class="input-field col s12">
                <label for="password" th:text="#{messages.common.label.password}">Password</label>
                <input id="password" type="password" th:field="*{password}" th:value="${password}" class="validate"/>
                <div th:if="${#fields.hasErrors('password')}" th:errors="*{password}"
                     class="validation-message alert alert-danger" role="alert"></div>
            </div>
            <div class="col s12 center">
                <button class="btn waves-effect waves-light" type="submit" name="action" th:text="#{messages.user.account.button.changePassword}">Change password
                    <i class="material-icons right">send</i>
                </button>
            </div>
        </form>

        <p class="col s12 center" th:text="#{messages.user.account.label.deleteAccountInfo}">
            To cancel your account, you first have to cancel all services.
        </p>

        <form class="blue lighten-4" autocomplete="off" action="#" th:action="@{'/user_account_delete/'+${user.id}}"
              th:object="${user}" method="post" role="form" data-toggle="validator">
            <div class="col s12 center">
                <button class="btn waves-effect waves-light color red" type="submit" name="action" th:text="#{messages.user.account.button.deleteAccount}">Delete the account</button>
            </div>
        </form>

    </div>
</div>

</body>
</html>